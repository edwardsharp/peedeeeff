<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>PEE-DEE-EFF</title>
        <style>
            html,
            body {
                margin: 0;
                padding: 0;
                font-family: sans-serif;
                height: 100%;
                background: black;
                color: white;
            }
            a,
            a:link,
            a:visited,
            a:active {
                color: black;
            }
            a:hover {
                color: white;
            }
            header {
                text-align: center;
            }
            footer {
                text-align: center;
                align-items: center;
            }
            footer .center {
                background: magenta;
                height: 100%;
                line-height: 2.5rem;
                padding: 0px 1rem;
            }
            header h1 {
                display: flex;
                flex-direction: row;
                justify-content: space-evenly;
                font-size: 1rem;
                margin: 0;
            }
            header,
            footer {
                height: 2.5rem;
                display: flex;
                align-content: center;
            }

            header div,
            footer div {
                flex-grow: 1;
            }
            header h1 {
                background: magenta;
                color: black;
                height: 100%;
                display: block;
                line-height: 2.5rem;
                width: 220px;
                padding-right: 1rem;
                box-sizing: border-box;
            }
            body {
                display: flex;
                flex-direction: column;
                height: 100dvh;
            }
            main {
                display: flex;
                flex: 1;
                overflow: hidden;
            }
            nav {
                width: 220px;
                min-width: 220px;
                max-width: 220px;
                box-sizing: border-box;
                overflow-y: auto;
            }
            nav h2 {
                padding: 0 1rem;
                font-size: 1.25rem;
            }
            nav em {
                font-size: 0.75rem;
                display: block;
                padding: 0.5rem 0px;
            }
            nav label {
                border-bottom: thick solid magenta;
                padding: 0 1rem;
            }
            #toggle-controlz-wrapper {
                padding: 1rem;
            }
            #hamburger:hover {
                cursor: context-menu;
            }
            #madewith {
                position: sticky;
                bottom: 0;
                font-size: 0.75em;
                font-weight: 100;
                background: magenta;
                color: black;
                text-align: center;

                display: block;
                line-height: 2.5rem;
                width: 220px;
                padding: 0.25rem 1rem;
                box-sizing: border-box;
            }
            main > webp-peedeeeff {
                flex: 1;
                height: 100%;
            }
            .scroll-message {
                font-size: 2rem;
                background: white;
                color: black;
                z-index: 1;
            }
            form label {
                display: block;
                margin-top: 1rem;
            }
            form input[type="text"],
            form input[type="number"] {
                width: 100%;
                padding: 0.25rem;
                margin-top: 0.25rem;
                box-sizing: border-box;
            }

            @media screen and (max-width: 600px) {
                footer {
                    display: none;
                }
                header.hidden {
                    position: absolute;
                    top: 0;
                    right: 0;
                    width: 200px;
                    z-index: 2;
                }
            }
        </style>
    </head>
    <body>
        <header id="header">
            <div>&nbsp;</div>
            <h1 id="hamburger" title="ðŸ” toggle controlz">
                P E E - D E E - E F F
            </h1>
        </header>
        <main>
            <pee-dee-eff
                id="peedeeeff"
                last-page="6"
                base-path="example/undoinganddoing"
                loop="false"
                background="white"
                single-boundary="false"
                scroll-mode="true"
                horizontal-scroll-mode="false"
                one-atta-time="true"
            >
                <div
                    class="scroll-message"
                    slot="scroll-message"
                    title="i'm scrollin' ovah heeeere!"
                >
                    scroll down ðŸ‘‡
                </div>
            </pee-dee-eff>

            <nav id="nav">
                <form id="peedeeeffForm">
                    <h2>controlz</h2>
                    <label class="base-path-controlz">
                        base-path
                        <select id="base-path"></select>
                        <em
                            >base path to webp files named like
                            page-000.webp</em
                        >
                    </label>

                    <label>
                        last-page
                        <input
                            type="number"
                            name="last-page"
                            value="11"
                            min="0"
                        />
                        <em>total page range (the last page-XXX.webp file)</em>
                    </label>

                    <label>
                        <input type="checkbox" name="loop" /> loop

                        <em
                            >if horizontal scroll, will loop start and end</em
                        ></label
                    >

                    <label>
                        <input type="checkbox" name="single-boundary" />
                        single-boundary
                        <em
                            >1 up display of first and last page, all other are
                            2 up</em
                        >
                    </label>

                    <label>
                        <input type="checkbox" name="one-atta-time" checked />
                        one-atta-time
                        <em>only display one page/image at a time</em>
                    </label>

                    <label>
                        <input type="checkbox" name="scroll-mode" checked />
                        vertical scroll
                        <em
                            >vertical scroll (disables horizontal scroll
                            mode)</em
                        >
                    </label>

                    <label>
                        <input type="checkbox" name="horizontal-scroll-mode" />
                        horizontal scroll
                        <em
                            >horizontal scroll (doesn't use prev/next page
                            buttons)</em
                        >
                    </label>

                    <label>
                        background
                        <input type="text" name="background" value="white" />
                        <em>background color behind webp images</em>
                    </label>
                </form>

                <div id="toggle-controlz-wrapper">
                    <button id="toggle-controlz">
                        toggle advanced controlz
                    </button>
                </div>

                <a id="madewith" href="https://github.com/edwardsharp/peedeeeff"
                    >madewith ðŸ’– in nyc</a
                >
            </nav>
        </main>
        <!-- could add some kind of info/link/whateverstuff here, i guess? ðŸ¦¶ -->
        <!-- <footer>
            <div>&nbsp;</div>
            <div class="center">
                <i>Â«hodgepodgeÂ»</i> from the
                <a href="http://undoinganddoing.club/">undoinganddoing.club</a>.
            </div>
            <div>&nbsp;</div>
        </footer> -->
        <script>
            [
                "example/undoinganddoing",
                // "geozone/disinformation",
                // "geozone/seabed-mining",
                // "geozone/living-anarchy",
                // "geozone/academic-rebellion",
                // "geozone/safer-without-police",
                // "geozone/tarde-01",
                // "geozone/hiss2025-print-compressed",
                // "geozone/quercus",
                // "geozone/transformative-housing-print",
                // "geozone/remember-that-girl",
                // "geozone/mapping-emotions",
                // "geozone/foraging-art-print",
                // "geozone/tarde-02",
                // "geozone/body-territories-datafied-city",
                // "geozone/tarde-03",
                // "geozone/rootling",
                // "geozone/jesters-freaks-print",
                // "geozone/ruptures-i-print",
                // "geozone/memorias-english",
                // "geozone/gaza-academics",
                // "geozone/esri",
                // "geozone/whirlwind-i",
                // "geozone/tarde-06",
                // "geozone/abolition-methodologies-print",
                // "geozone/militarism-climate-crisis",
                // "geozone/zine-education",
                // "geozone/tarde-04",
                // "geozone/inland-empire-waterways",
                // "geozone/come-habla",
                // "geozone/tarde-05",
                // "geozone/the-words-print",
                // "geozone/strangers",
                // "geozone/crisis-accomodation-print",
                // "geozone/handford",
                // "geozone/heat-diary",
                // "geozone/start-with-a-park-print",
                // "geozone/villes-de-guerre-quotidienne",
                // "geozone/sounds-detroit",
                // "geozone/straights",
                // "geozone/recuerda-esa-chica",
                // "geozone/aukaat",
                // "geozone/crisis-accomodation",
                // "geozone/people-ports-power-01",
                // "geozone/nyc-gentrification",
                // "geozone/dumpster-stories",
                // "geozone/foraging-art",
                // "geozone/defensive-design",
                // "geozone/transformative-housing",
                // "geozone/people-ports-power-02",
                // "geozone/militarism-climate-crisis-print",
                // "geozone/start-with-a-park",
                // "geozone/otay-mountain",
                // "geozone/peace-stories",
                // "geozone/garbage-gardening-print",
                // "geozone/zine-education-print",
                // "geozone/love-and-rage-print",
                // "geozone/abolition-methodologies",
                // "geozone/demand-the-impossible",
                // "geozone/sounds-birmingham",
                // "geozone/embodying-pipeline",
                // "geozone/data-centres-print",
                // "geozone/jesters-freaks",
                // "geozone/staircase-oskemen",
                // "geozone/mapping-sense",
                // "geozone/elc-healthcare",
                // "geozone/strangers-print",
                // "geozone/strange-natures-print",
                // "geozone/love-ctrl",
                // "geozone/alaskaland",
                // "geozone/anti-ableist-university",
                // "geozone/mapping-routes",
                // "geozone/garbage-gardening",
                // "geozone/space-waste",
                // "geozone/data-centres",
                // "geozone/david-goliath",
                // "geozone/energyscapes-print",
                // "geozone/ruptures-i",
                // "geozone/energyscapes",
                // "geozone/dumpster-stories-print",
                // "geozone/defensive-design-print",
                // "geozone/strange-natures",
                // "geozone/whirlwind-ii",
                // "geozone/cities-of-banal-warfare",
                // "geozone/taming-rivers",
                // "geozone/mais-dauntaun-2",
                // "geozone/rootling-print",
                // "geozone/misoprostol",
                // "geozone/sounds-wollongong",
                // "geozone/mais-dauntaun-3",
                // "geozone/treaty-rock",
                // "geozone/memorias-espanol",
                // "geozone/myron-eells",
                // "geozone/mais-dauntaun-1",
                // "geozone/the-words",
                // "geozone/love-and-rage",
                // "geozone/black-ecologies",
                // "geozone/mapping-customary-practices",
                // "geozone/got-power",
                // "geozone/mais-dauntaun-4",
                // "geozone/misoprostol-print",
                // "geozone/nyc-gentrification-print",
                // "geozone/embodying-pipeline-print",
                // "geozone/the-paradise",
                // "geozone/hiss2025",
                // "geozone/academic-rebellion-print",
                // "geozone/the-anthropussy-print",
                // "geozone/anti-ableist-university-alt-text",
                // "geozone/theoretical-self-defense",
                // "geozone/the-anthropussy",
            ].forEach((zine) => {
                const basePathSelectEl = document.getElementById("base-path");
                const opt = document.createElement("option");
                opt.value = zine;
                opt.innerText = zine.split("/")[1];
                basePathSelectEl.appendChild(opt);
            });

            let showAdvancedControlz = false;
            const toggleAdvancedControlz = () => {
                document
                    .querySelectorAll(
                        "#peedeeeffForm > *:not(.base-path-controlz)",
                    )
                    .forEach((el) => {
                        el.style.display = showAdvancedControlz
                            ? "block"
                            : "none";
                    });
                showAdvancedControlz = !showAdvancedControlz;
            };
            toggleAdvancedControlz();
            document
                .getElementById("toggle-controlz")
                .addEventListener("click", () => toggleAdvancedControlz());

            const hamburger = document.getElementById("hamburger");
            const nav = document.getElementById("nav");
            const header = document.getElementById("header");
            let hidden = false;
            hamburger.addEventListener("click", () => {
                nav.style.display = hidden ? "block" : "none";

                if (hidden) {
                    header.classList.remove("hidden");
                } else {
                    header.classList.add("hidden");
                }
                hidden = !hidden;
            });

            const form = document.getElementById("peedeeeffForm");
            window.peedeeeff = document.getElementById("peedeeeff");

            const props = [
                "base-path",
                "last-page",
                "loop",
                "single-boundary",
                "one-atta-time",
                "scroll-mode",
                "horizontal-scroll-mode",
                "background",
            ];

            props.forEach((prop) => {
                const input = form.elements[prop];
                if (!input) return;

                input.addEventListener("input", () =>
                    updatepeedeeeff(prop, input),
                );
                input.addEventListener("change", () =>
                    updatepeedeeeff(prop, input),
                );
            });

            function updatepeedeeeff(prop, input) {
                if (input.type === "checkbox") {
                    if (input.checked) {
                        window.peedeeeff.setAttribute(prop, "true");
                    } else {
                        window.peedeeeff.removeAttribute(prop);
                    }
                } else {
                    window.peedeeeff.setAttribute(prop, input.value);
                }

                const newpeedeeeff = window.peedeeeff.cloneNode(true);
                window.peedeeeff.replaceWith(newpeedeeeff);
                newpeedeeeff.id = "peedeeeff";
                window.peedeeeff = newpeedeeeff;

                syncControlStates();
            }

            function syncControlStates() {
                const scrollMode = form.elements["scroll-mode"].checked;
                const hScrollMode =
                    form.elements["horizontal-scroll-mode"].checked;

                form.elements["scroll-mode"].disabled = hScrollMode;
                form.elements["horizontal-scroll-mode"].disabled = scrollMode;

                // so then disable loop opt if either checked
                const loop = form.elements["loop"];
                loop.disabled = scrollMode || hScrollMode;

                const singleBoundryEl = form.elements["single-boundary"];
                const oneAttaTimeEl = form.elements["one-atta-time"];
                oneAttaTimeEl.disabled = singleBoundryEl.checked;
                singleBoundryEl.disabled = oneAttaTimeEl.checked;
            }

            syncControlStates();
        </script>
        <script src="peedeeeff.js"></script>
    </body>
</html>
