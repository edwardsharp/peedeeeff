<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>PEE-DEE-EFF</title>
        <style>
            html,
            body {
                margin: 0;
                padding: 0;
                font-family: sans-serif;
                height: 100%;
                background: black;
                color: white;
            }
            a,
            a:link,
            a:visited,
            a:active {
                color: black;
            }
            a:hover {
                color: white;
            }
            header {
                text-align: center;
            }
            footer {
                text-align: center;
                align-items: center;
            }
            footer .center {
                background: magenta;
                height: 100%;
                line-height: 2.5rem;
                padding: 0px 1rem;
            }
            header h1 {
                display: flex;
                flex-direction: row;
                justify-content: space-evenly;
                font-size: 1rem;
                margin: 0;
            }
            header,
            footer {
                height: 2.5rem;
                display: flex;
                align-content: center;
            }

            header div,
            footer div {
                flex-grow: 1;
            }
            header h1 {
                background: magenta;
                color: black;
                height: 100%;
                display: block;
                line-height: 2.5rem;
                width: 220px;
                padding-right: 1rem;
                box-sizing: border-box;
            }
            body {
                display: flex;
                flex-direction: column;
                height: 100dvh;
            }
            main {
                display: flex;
                flex: 1;
                overflow: hidden;
            }
            nav {
                width: 220px;
                min-width: 220px;
                max-width: 220px;
                box-sizing: border-box;
                overflow-y: auto;
            }
            nav h2 {
                padding: 0 1rem;
                font-size: 1.25rem;
            }
            nav em {
                font-size: 0.75rem;
                display: block;
                padding: 0.5rem 0px;
            }
            nav label {
                border-bottom: thick solid magenta;
                padding: 0 1rem;
            }
            #toggle-controlz-wrapper {
                padding: 1rem;
            }
            #hamburger:hover {
                cursor: context-menu;
            }
            #madewith {
                position: sticky;
                bottom: 0;
                font-size: 0.75em;
                font-weight: 100;
                background: magenta;
                color: black;
                text-align: center;

                display: block;
                line-height: 2.5rem;
                width: 220px;
                padding: 0.25rem 1rem;
                box-sizing: border-box;
            }
            main > webp-peedeeeff {
                flex: 1;
                height: 100%;
            }
            .scroll-message {
                font-size: 2rem;
                background: white;
                color: black;
                z-index: 1;
            }
            form label {
                display: block;
                margin-top: 1rem;
            }
            form input[type="text"],
            form input[type="number"] {
                width: 100%;
                padding: 0.25rem;
                margin-top: 0.25rem;
                box-sizing: border-box;
            }

            @media screen and (max-width: 600px) {
                footer {
                    display: none;
                }
                header.hidden {
                    position: absolute;
                    top: 0;
                    right: 0;
                    width: 200px;
                    z-index: 2;
                }
            }
        </style>
    </head>
    <body>
        <header id="header">
            <div>&nbsp;</div>
            <h1 id="hamburger" title="🍔 toggle controlz">
                P E E - D E E - E F F
            </h1>
        </header>
        <main>
            <pee-dee-eff
                id="peedeeeff"
                last-page="6"
                base-path="example/undoinganddoing"
                loop="false"
                background="white"
                single-boundary="false"
                scroll-mode="true"
                horizontal-scroll-mode="false"
                one-atta-time="true"
            >
                <div
                    class="scroll-message"
                    slot="scroll-message"
                    title="i'm scrollin' ovah heeeere!"
                >
                    scroll down 👇
                </div>
            </pee-dee-eff>

            <nav id="nav">
                <form id="peedeeeffForm">
                    <h2>controlz</h2>
                    <label class="base-path-controlz">
                        base-path
                        <select id="base-path"></select>
                        <em
                            >base path to webp files named like
                            page-000.webp</em
                        >
                    </label>

                    <label>
                        last-page
                        <input
                            type="number"
                            name="last-page"
                            value="11"
                            min="0"
                        />
                        <em>total page range (the last page-XXX.webp file)</em>
                    </label>

                    <label>
                        <input type="checkbox" name="loop" /> loop

                        <em
                            >if horizontal scroll, will loop start and end</em
                        ></label
                    >

                    <label>
                        <input type="checkbox" name="single-boundary" />
                        single-boundary
                        <em
                            >1 up display of first and last page, all other are
                            2 up</em
                        >
                    </label>

                    <label>
                        <input type="checkbox" name="one-atta-time" checked />
                        one-atta-time
                        <em>only display one page/image at a time</em>
                    </label>

                    <label>
                        <input type="checkbox" name="scroll-mode" checked />
                        vertical scroll
                        <em
                            >vertical scroll (disables horizontal scroll
                            mode)</em
                        >
                    </label>

                    <label>
                        <input type="checkbox" name="horizontal-scroll-mode" />
                        horizontal scroll
                        <em
                            >horizontal scroll (doesn't use prev/next page
                            buttons)</em
                        >
                    </label>

                    <label>
                        background
                        <input type="text" name="background" value="white" />
                        <em>background color behind webp images</em>
                    </label>
                </form>

                <div id="toggle-controlz-wrapper">
                    <button id="toggle-controlz">
                        toggle advanced controlz
                    </button>
                </div>

                <a id="madewith" href="https://github.com/edwardsharp/peedeeeff"
                    >madewith 💖 in nyc</a
                >
            </nav>
        </main>
        <!-- could add some kind of info/link/whateverstuff here, i guess? 🦶 -->
        <!-- <footer>
            <div>&nbsp;</div>
            <div class="center">
                <i>«hodgepodge»</i> from the
                <a href="http://undoinganddoing.club/">undoinganddoing.club</a>.
            </div>
            <div>&nbsp;</div>
        </footer> -->
        <script>
            const library = [
                ["example/undoinganddoing", 006],
                ["geozone/disinformation", 12],
                ["geozone/safer-without-police", 14],
                ["geozone/otay-mountain", 40],
                ["geozone/the-anthropussy", 16],
                ["geozone/whirlwind-i", 18],
                ["geozone/ruptures-i", 21],
                ["geozone/the-anthropussy-print", 8],
                ["geozone/garbage-gardening", 13],
                ["geozone/strangers-print", 8],
                ["geozone/strange-natures-print", 26],
                ["geozone/jesters-freaks", 5],
                ["geozone/zine-education", 32],
                ["geozone/nyc-gentrification", 16],
                ["geozone/ruptures-i-print", 20],
                ["geozone/sounds-birmingham", 36],
                ["geozone/people-ports-power-02", 56],
                ["geozone/strange-natures", 52],
                ["geozone/foraging-art-print", 5],
                ["geozone/crisis-accomodation-print", 10],
                ["geozone/mapping-customary-practices", 68],
                ["geozone/nyc-gentrification-print", 8],
                ["geozone/start-with-a-park-print", 1],
                ["geozone/hiss2025-print-compressed", 16],
                ["geozone/handford", 7],
                ["geozone/body-territories-datafied-city", 20],
                ["geozone/whirlwind-ii", 24],
                ["geozone/esri", 17],
                ["geozone/data-centres", 23],
                ["geozone/the-words-print", 2],
                ["geozone/black-ecologies", 64],
                ["geozone/crisis-accomodation", 11],
                ["geozone/mapping-sense", 8],
                ["geozone/love-and-rage-print", 1],
                ["geozone/villes-de-guerre-quotidienne", 38],
                ["geozone/dumpster-stories-print", 8],
                ["geozone/embodying-pipeline-print", 10],
                ["geozone/energyscapes", 14],
                ["geozone/the-paradise", 96],
                ["geozone/tarde-01", 5],
                ["geozone/mapping-emotions", 80],
                ["geozone/tarde-06", 7],
                ["geozone/memorias-espanol", 36],
                ["geozone/alaskaland", 8],
                ["geozone/theoretical-self-defense", 20],
                ["geozone/heat-diary", 94],
                ["geozone/hiss2025", 17],
                ["geozone/garbage-gardening-print", 12],
                ["geozone/david-goliath", 9],
                ["geozone/the-words", 8],
                ["geozone/strangers", 16],
                ["geozone/zine-education-print", 49],
                ["geozone/mais-dauntaun-1", 96],
                ["geozone/data-centres-print", 24],
                ["geozone/anti-ableist-university", 24],
                ["geozone/embodying-pipeline", 20],
                ["geozone/elc-healthcare", 15],
                ["geozone/abolition-methodologies", 32],
                ["geozone/taming-rivers", 9],
                ["geozone/academic-rebellion-print", 10],
                ["geozone/aukaat", 73],
                ["geozone/treaty-rock", 10],
                ["geozone/defensive-design", 18],
                ["geozone/space-waste", 14],
                ["geozone/transformative-housing-print", 6],
                ["geozone/straights", 13],
                ["geozone/staircase-oskemen", 12],
                ["geozone/anti-ableist-university-alt-text", 9],
                ["geozone/remember-that-girl", 9],
                ["geozone/misoprostol-print", 12],
                ["geozone/people-ports-power-01", 42],
                ["geozone/sounds-wollongong", 68],
                ["geozone/peace-stories", 36],
                ["geozone/abolition-methodologies-print", 16],
                ["geozone/inland-empire-waterways", 8],
                ["geozone/energyscapes-print", 14],
                ["geozone/militarism-climate-crisis", 28],
                ["geozone/recuerda-esa-chica", 9],
                ["geozone/dumpster-stories", 16],
                ["geozone/love-and-rage", 8],
                ["geozone/quercus", 12],
                ["geozone/start-with-a-park", 5],
                ["geozone/misoprostol", 7],
                ["geozone/defensive-design-print", 18],
                ["geozone/academic-rebellion", 19],
                ["geozone/cities-of-banal-warfare", 38],
                ["geozone/myron-eells", 12],
                ["geozone/memorias-english", 36],
                ["geozone/militarism-climate-crisis-print", 28],
                ["geozone/foraging-art", 8],
                ["geozone/jesters-freaks-print", 8],
                ["geozone/got-power", 20],
                ["geozone/love-ctrl", 11],
                ["geozone/living-anarchy", 6],
                ["geozone/mais-dauntaun-3", 104],
                ["geozone/mais-dauntaun-4", 120],
                ["geozone/tarde-05", 3],
                ["geozone/tarde-02", 5],
                ["geozone/gaza-academics", 3],
                ["geozone/come-habla", 35],
                ["geozone/rootling", 7],
                ["geozone/transformative-housing", 12],
                ["geozone/mapping-routes", 44],
                ["geozone/mais-dauntaun-2", 92],
                ["geozone/demand-the-impossible", 26],
                ["geozone/sounds-detroit", 46],
                ["geozone/seabed-mining", 14],
                ["geozone/tarde-03", 5],
                ["geozone/rootling-print", 6],
                ["geozone/tarde-04", 7],
            ];

            library.forEach(([zine, pages]) => {
                const basePathSelectEl = document.getElementById("base-path");
                const opt = document.createElement("option");
                opt.value = zine;
                opt.innerText = zine.split("/")[1];
                basePathSelectEl.appendChild(opt);
            });

            let showAdvancedControlz = false;
            const toggleAdvancedControlz = () => {
                document
                    .querySelectorAll(
                        "#peedeeeffForm > *:not(.base-path-controlz)",
                    )
                    .forEach((el) => {
                        el.style.display = showAdvancedControlz
                            ? "block"
                            : "none";
                    });
                showAdvancedControlz = !showAdvancedControlz;
            };
            toggleAdvancedControlz();
            document
                .getElementById("toggle-controlz")
                .addEventListener("click", () => toggleAdvancedControlz());

            const hamburger = document.getElementById("hamburger");
            const nav = document.getElementById("nav");
            const header = document.getElementById("header");
            let hidden = false;
            hamburger.addEventListener("click", () => {
                nav.style.display = hidden ? "block" : "none";

                if (hidden) {
                    header.classList.remove("hidden");
                } else {
                    header.classList.add("hidden");
                }
                hidden = !hidden;
            });

            const form = document.getElementById("peedeeeffForm");
            window.peedeeeff = document.getElementById("peedeeeff");

            const props = [
                "base-path",
                "last-page",
                "loop",
                "single-boundary",
                "one-atta-time",
                "scroll-mode",
                "horizontal-scroll-mode",
                "background",
            ];

            props.forEach((prop) => {
                const input = form.elements[prop];
                if (!input) return;

                input.addEventListener("input", () =>
                    updatepeedeeeff(prop, input),
                );
            });

            function updatepeedeeeff(prop, input) {
                if (input.type === "checkbox") {
                    if (input.checked) {
                        window.peedeeeff.setAttribute(prop, "true");
                    } else {
                        window.peedeeeff.removeAttribute(prop);
                    }
                } else {
                    window.peedeeeff.setAttribute(prop, input.value);
                }

                if ((input.id = "base-path")) {
                    const lastPage = library.find(
                        ([k, _]) => k === input.value,
                    )[1];
                    if (isNaN(lastPage)) return;
                    form.elements["last-page"].value = lastPage;
                    window.peedeeeff.setAttribute("last-page", lastPage);
                }

                const newpeedeeeff = window.peedeeeff.cloneNode(true);
                window.peedeeeff.replaceWith(newpeedeeeff);
                newpeedeeeff.id = "peedeeeff";
                window.peedeeeff = newpeedeeeff;

                syncControlStates();
            }

            function syncControlStates() {
                const scrollMode = form.elements["scroll-mode"].checked;
                const hScrollMode =
                    form.elements["horizontal-scroll-mode"].checked;

                form.elements["scroll-mode"].disabled = hScrollMode;
                form.elements["horizontal-scroll-mode"].disabled = scrollMode;

                // so then disable loop opt if either checked
                const loop = form.elements["loop"];
                loop.disabled = scrollMode || hScrollMode;

                const singleBoundryEl = form.elements["single-boundary"];
                const oneAttaTimeEl = form.elements["one-atta-time"];
                oneAttaTimeEl.disabled = singleBoundryEl.checked;
                singleBoundryEl.disabled = oneAttaTimeEl.checked;
            }

            syncControlStates();
        </script>
        <script src="peedeeeff.js"></script>
    </body>
</html>
